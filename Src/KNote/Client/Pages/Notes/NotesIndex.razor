@inject TooltipService tooltipService

@attribute [Authorize(Roles = "Public, Staff, ProjecManager, Admin")]

<EntityList List="Notes">
    <AllItems>
        <RadzenDataGrid Data="@Notes" TItem="NoteMinimalDto" AllowColumnResize="true" Density="@Density.Compact">
            <Columns>                
                <RadzenDataGridColumn TItem="NoteMinimalDto" Property="NoteNumber" Title="Note #" Width="80px" TextAlign="TextAlign.Center" />
                <RadzenDataGridColumn TItem="NoteMinimalDto" Property="Topic" Title="Topic" />
                <RadzenDataGridColumn TItem="NoteMinimalDto" Property="Priority" Title="Priority " Width="60px" TextAlign="TextAlign.Right" />
                <RadzenDataGridColumn TItem="NoteMinimalDto" Property="CreationDateTime" Title="Date " FormatString="{0:d}" Width="80px" TextAlign="TextAlign.Right" />
                <RadzenDataGridColumn TItem="NoteMinimalDto" Title="Actions" Width="100px" TextAlign="TextAlign.Center">
                    <Template Context="data">                                                
                        <RadzenButton Click="@(() => OnNoteEdit.InvokeAsync(data))" Icon="edit" Size="ButtonSize.Small"
                            ButtonStyle="ButtonStyle.Primary" 
                            MouseEnter="@(args => tooltipService.Open(args, "Edit note ...", new TooltipOptions(){ Position = TooltipPosition.Left }) )" Class="mr-0 mb-0"  />
                        <RadzenButton Click="@(() => OnNoteDelete.InvokeAsync(data))" Icon="delete" Size="ButtonSize.Small"
                            ButtonStyle="ButtonStyle.Danger" 
                            MouseEnter="@(args => tooltipService.Open(args, "Delete note ...", new TooltipOptions(){ Position = TooltipPosition.Left }) )" />
                    </Template>
                </RadzenDataGridColumn>
            </Columns> 
        </RadzenDataGrid>
    </AllItems>
</EntityList>

@code {
    [Parameter] public List<NoteMinimalDto>? Notes { get; set; }
    [Parameter] public EventCallback<NoteMinimalDto> OnNoteDelete { get; set; }
    [Parameter] public EventCallback<NoteMinimalDto> OnNoteEdit { get; set; }
    [Parameter] public EventCallback<NoteMinimalDto> OnNoteView { get; set; }
}
