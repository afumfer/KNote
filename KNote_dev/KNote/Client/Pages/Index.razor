@page "/"
@page "/index"

@using KNote.Client.Pages.Notes

@inject IKntClientDataService  dataService
@inject NavigationManager navigationManger
@inject IShowMessages showMessages


<div>
    <h3>Recent notes</h3>
    <p>Mode: @appState.AppMode</p>
    <NotesList Notes="notes" />
</div>


@code {

    [CascadingParameter] private AppState appState { get; set; }

    private List<NoteInfoDto> notes;

    protected override async Task OnInitializedAsync()
    {
        // TODO: !!! Delete
        //await Task.Delay(1000);
        //notes = dataService.GetNotes();

        var res = await dataService.Get<Result<List<NoteInfoDto>>>("api/notes/recentnotes");
        notes = res.Response.Entity;

    }

}
